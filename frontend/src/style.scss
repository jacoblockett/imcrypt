// Variables
$text: hsl(255, 61%, 90%);
$text-dark: hsl(255, 61%, 80%);
$text-darkest: hsl(255, 10%, 30%);
$checkbox-background: hsl(255, 10%, 20%);
$background: hsl(260, 18%, 8%);
$background-light: hsl(257, 17%, 10%);
$primary: hsl(260, 59%, 71%);
$primary-dark: hsl(260, 24%, 46%);
$hovered-item: hsl(260, 24%, 27%);
$active-item: hsl(260, 24%, 20%);
$selected-item: hsl(260, 24%, 35%);
$primary-darker: hsl(260, 24%, 21%);
$secondary: hsl(301, 59%, 40%);
$accent: hsl(311, 59%, 57%);
$accent-light: hsl(311, 63%, 65%);
$success: hsl(149, 45%, 47%);
$warn: hsl(45, 85%, 66%);

$input-background: hsl(260, 18%, 13%);
$input-background-contrast: hsl(260, 18%, 16%);
$input-text: hsl(260, 59%, 71%);

// Fonts
@font-face {
	font-family: "Roboto";
	src: url("./assets/fonts/Roboto-Regular.ttf") format("truetype");
}

// Reset
*,
*::after,
*::before {
	padding: 0;
	margin: 0;
	box-sizing: border-box;
	font-size: 1em;
	font-family: "Roboto";
	border: none;
	user-select: none;
	background: none;
	color: $text;
	outline: none;
	text-decoration: none;
}

u {
	text-decoration: underline;
}

html,
body {
	overflow: hidden;
}

a {
	font-size: 0.9em;

	&:hover,
	&:focus:not(:active) {
		filter: brightness(1.125);
	}

	&:active {
		filter: brightness(0.85);
	}
}

button {
	cursor: pointer;
	padding: 0.65em 1em;
	border-radius: 4px;
	font-size: 0.9em;
	display: inline-flex;
	justify-content: center;
	align-items: center;

	&:hover,
	&:focus:not(:active) {
		filter: brightness(1.125);
	}

	&:active {
		filter: brightness(0.85);
	}
}

input[type="date"]::-webkit-calendar-picker-indicator,
input[type="date"]::-webkit-inner-spin-button {
	display: none;
	-webkit-appearance: none;
}

input[type="date"] + .action-button-wrapper svg {
	height: 80%;
}

// Components
.toggle {
	button {
		padding: 0.75rem 1rem;
		font-size: 0.85em;
		background-color: $input-background;
		width: 4rem;
		color: $primary-dark;

		&:first-of-type {
			border-top-right-radius: 0;
			border-bottom-right-radius: 0;
		}

		&:last-of-type {
			border-top-left-radius: 0;
			border-bottom-left-radius: 0;
		}

		&.selected {
			background-color: $primary-dark;
			color: $text;
		}
	}
}

.multiselect-dropdown {
	border-radius: 4px;
	background-color: $input-background;
	width: inherit;
	height: 2.55rem;

	svg path {
		color: $primary;
	}
}

.dropdown {
	display: inline-flex;
	position: relative;
	border-radius: 4px;
	background-color: $input-background;
	width: inherit;
	height: 2.55em;
	cursor: pointer;
	scrollbar-color: $primary-darker transparent;

	&* {
		height: inherit;
		color: $background;
	}

	label {
		transition: top 0.1s, left 0.1s, bottom 0.1s, padding 0.1s, font-size 0.1s;
	}

	label,
	.placeholder,
	.selected-display {
		pointer-events: none;
		top: 50%;
		transform: translateY(-50%);
		text-overflow: ellipsis;
		position: absolute;
		display: flex;
		flex-direction: column;
		justify-content: center;
		width: 100%;
		padding: 0.65em 1em;
		font-size: 0.85rem;
		cursor: pointer;
		background-color: transparent;
		color: $input-text;
	}

	.placeholder {
		opacity: 0.4;
	}

	.arrow {
		margin-left: auto;
		display: flex;
		justify-content: center;
		align-items: center;
		padding: 0.2rem;
		border-radius: 100px;
		height: 71%;
		margin-right: 0.5rem;
		align-self: center;

		svg {
			height: 100%;
			width: 100%;

			path {
				stroke: $input-text;
			}
		}
	}

	&:hover,
	&:focus:not(:active) {
		.arrow {
			background-color: $primary-darker;
		}
	}

	&:active {
		.arrow {
			filter: brightness(0.85);
		}
	}

	.dropdown-options {
		display: flex;
		flex-direction: column;
		position: absolute;
		border-bottom-left-radius: 4px;
		border-bottom-right-radius: 4px;
		top: 100%;
		max-height: 15rem;
		height: 0px;
		width: 100%;
		background-color: $input-background;
		overflow-y: auto;
	}

	&.open {
		border-bottom-left-radius: 0;
		border-bottom-right-radius: 0;
		box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);

		.dropdown-options {
			height: auto;
			border-top: 2px solid $input-background-contrast;
			z-index: 1000;
			box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);

			.option {
				background-color: $input-background;
				justify-content: left;
				border-radius: 0;
				color: $primary;
				padding: 0.65rem 0.8rem;
				font-size: 0.8rem;
				text-align: left;

				&:not(.no-select):hover,
				&:not(.no-select):focus:not(:active) {
					filter: brightness(1.3);
				}

				&:not(.no-select):active {
					filter: brightness(0.9);
				}

				&:not(.no-select) {
					.checkbox {
						height: 1rem;
						width: 1rem;
						margin-right: 10px;
						border: 0.1rem solid $primary;
					}

					&.selected {
						background-color: $primary-darker;

						.checkbox {
							background-color: $primary;
							border: 0.2rem solid $input-background;
							box-shadow: 0 0 0 0.1rem $primary;
						}
					}
				}

				&:last-child {
					border-bottom-left-radius: 4px;
					border-bottom-right-radius: 4px;
				}
			}
		}

		&.go-up {
			border-radius: 0 0 4px 4px;

			.dropdown-options {
				top: unset;
				bottom: 100%;
				border-top: unset;
				border-bottom: 2px solid $input-background-contrast;
				border-radius: 4px 4px 0 0;

				.dropdown-option {
					&:first-child {
						border-top-left-radius: 4px;
						border-top-right-radius: 4px;
					}

					&:last-child {
						border-bottom-left-radius: 0;
						border-bottom-right-radius: 0;
					}
				}
			}
		}
	}

	&.open,
	&.with-selected {
		label {
			font-size: 0.7rem !important;
			top: 0 !important;
			padding-top: 0 !important;
			padding-bottom: 0 !important;
			padding-left: 1em !important;
			height: auto !important;
		}
	}
}

.input-container {
	display: inline-flex;
	position: relative;
	border-radius: 4px;
	background-color: $input-background;

	&* {
		height: inherit;
		color: $background;
	}

	label {
		transition: top 0.1s, left 0.1s, bottom 0.1s, padding 0.1s, font-size 0.1s, height 0.1s;
	}

	label,
	.placeholder,
	.icon {
		top: 50%;
		transform: translateY(-50%);
	}

	.placeholder {
		color: $input-text;
		opacity: 0.4;
	}

	label,
	.placeholder {
		text-overflow: ellipsis;
		pointer-events: none;
	}

	input,
	textarea {
		// z-index: 10;
		height: 100%;

		&::-ms-reveal,
		&::-ms-clear {
			display: none;
		}
	}

	.label-container,
	label,
	.placeholder,
	textarea,
	.icon {
		position: absolute;
		display: flex;
		flex-direction: column;
		justify-content: center;
	}

	label,
	.placeholder,
	input,
	textarea,
	.icon {
		width: 100%;
		padding: 0.75rem 1rem;
		font-size: 0.85rem;
		cursor: text;
		background-color: transparent;
	}

	// textarea {
	// 	padding-top: 0.54rem;
	// }

	.icon {
		padding-left: 0.8em;
		width: 2.7rem;

		svg path {
			stroke: $input-text;
		}

		& ~ label,
		& ~ .placeholder,
		& ~ input,
		& ~ textarea {
			padding-left: 2.3em;
		}
	}

	label,
	input,
	textarea {
		color: $input-text;
		resize: none;
	}

	.action-button-wrapper {
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		border-radius: 0 4px 4px 0;
		padding: 0 0.35rem;
		cursor: pointer;
		max-height: 100%;

		button {
			padding: 0.35em;
			color: $input-text;
			width: 2em;
			height: 2em;

			svg {
				display: flex;
				justify-content: center;
				align-items: center;
				width: 100%;

				path {
					stroke: $input-text;
					fill: none;
				}
			}
		}
	}

	&:not(.disabled) .action-button-wrapper {
		button:hover,
		button:focus:not(:active) {
			background-color: $primary-darker;
			border-radius: 100px;
			filter: brightness(1);
		}

		button:active {
			filter: brightness(0.8);
		}
	}

	.hint {
		position: absolute;
		color: $text-dark;
		font-size: 0.75em;
		top: calc(100% + 0.25em);
	}

	&.error {
		label,
		.placeholder,
		input,
		.hint {
			color: $accent !important;
			stroke: $accent !important;
		}

		.icon,
		.icon * {
			color: $accent !important;
			stroke: $accent !important;
		}
	}

	&.is-focused {
		label {
			font-size: 0.7rem;
			top: 0 !important;
			padding-top: 0;
			padding-bottom: 0;
			padding-left: 1em;
			height: auto;
		}
	}

	&.type-number .action-button-wrapper button {
		height: 1.3em;
		width: 1.3em;
		padding: 0;
	}

	&.disabled {
		* {
			cursor: not-allowed;
		}

		input,
		textarea,
		button,
		label,
		.icon,
		.placeholder {
			opacity: 0.4 !important;
		}
	}
}

.gradient-text {
	color: $primary;
	background: linear-gradient(90deg, $primary 0%, $accent 100%);
	background-clip: text;
	-webkit-text-fill-color: transparent;
}

.page {
	color: $text;
	background-color: $background;
	width: 100vw;
	height: 100vh;
	overflow: hidden;
}

.drag-and-drop {
	border-radius: 4px;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	border: 4px dashed $text;
	padding: 2em;

	.icon {
		height: 60px;
		width: 60px;

		svg {
			height: 100%;
			width: 100%;
		}
	}

	.message {
		text-align: center;
		font-size: 1.35em;
		margin-top: 1em;
		width: 65%;
	}

	button {
		margin-top: 2em;
		background-color: $primary-dark;
		color: $text;
	}
}

.confirm-container {
	position: fixed;
	top: 0;
	left: 100vw;
	height: 100vh;
	width: 100vw;
	background-color: rgba(0, 0, 0, 0.22);
	justify-content: center;
	align-items: center;
	display: flex;
	z-index: 190;

	&.visible {
		left: 0vw;
	}

	.modal {
		background-color: $input-background;
		padding: 1.65rem 2.25rem;
		border-radius: 4px;
		box-shadow: 0 5px 10px rgba(0, 0, 0, 0.5);
		max-width: 45vw;
		max-height: 45vh;

		.message {
			word-wrap: break-word;

			textarea {
				width: 100%;
				resize: none;
				background-color: $input-background-contrast;
				padding: 1em;
				border-radius: 4px;
			}
		}

		.title + .message {
			margin-top: 2em;
		}

		.buttons {
			margin-top: 2rem;
			display: flex;
			justify-content: space-evenly;

			.confirm-btn {
				background-color: $accent;
				margin-right: 15px;
			}

			.cancel-btn {
				background-color: $primary-dark;
			}
		}
	}
}

.toast {
	position: fixed;
	border-radius: 4px;
	padding: 1rem 1.25rem;
	max-width: 300px;
	font-size: 0.9rem;
	display: flex;
	right: -500px;
	align-items: center;
	bottom: 1rem;
	transition: right 0.1s ease-in-out;
	z-index: 200;

	&.visible {
		right: 1rem;
	}

	.icon {
		background-color: rgba(0, 0, 0, 0.12);
		border-radius: 100%;
		height: 30px;
		font-size: 1.2rem;
		aspect-ratio: 1;
		display: flex;
		justify-content: center;
		align-items: center;
		margin-right: 12px;
	}

	&.error {
		background-color: $secondary;
	}

	&.info {
		background-color: $primary-dark;
	}
}

.shake {
	animation: shake 0.5s infinite ease-in-out;
}

@keyframes shake {
	0% {
		transform: translateX(0);
	}
	10% {
		transform: translateX(-5px);
	}
	20% {
		transform: translateX(5px);
	}
	40% {
		transform: translateX(-5px);
	}
	60% {
		transform: translateX(5px);
	}
	80% {
		transform: translateX(-5px);
	}
	100% {
		transform: translateX(0);
	}
}

// Pages
#open {
	position: relative;

	.drag-and-drop {
		max-width: 50%;
		position: absolute;
		left: 50%;
		top: 50%;
		transform: translate(-50%, -50%);
	}
}

#encrypt {
	display: flex;
	flex-direction: column;
	align-items: center;

	.selected-image {
		margin-top: 6.5em;
		margin-bottom: 2em;
		width: 161px;
		aspect-ratio: 1;
		border-radius: 100%;
		background-size: cover;
		background-position: center;
		background-repeat: no-repeat;
	}

	.input-container,
	.submit-button {
		margin-top: 1.75em;
		width: 300px;
		height: 40px;
	}

	.submit-button {
		background-color: $primary-dark;
	}

	a {
		font-size: 0.75em;
		margin-top: calc(3.5em - 20px);
		padding: 10px;
	}
}

#encrypt-auth {
	display: flex;

	.left-side,
	.right-side {
		width: 50%;
		padding: 1em;
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
	}

	.left-side {
		background-color: $background-light;

		.instruction {
			font-size: 1.1em;
			margin-bottom: 1.5em;
		}

		.instruction.or {
			font-size: 0.9em;
		}

		hr {
			margin: 2em 0;
			height: 2px;
			width: 70%;
			background-color: $input-background-contrast;
		}

		.qr-code {
			width: 40%;
			max-width: 350px;

			img {
				width: 100%;
			}
		}

		.secret-input {
			width: 65%;
			max-width: 350px;

			input {
				text-align: center;
			}
		}

		.nevermind {
			position: fixed;
			bottom: 0.5em;
			left: 0.5em;
			font-size: 0.8em;
		}
	}

	.right-side {
		.instruction {
			font-size: 1.1em;
			margin-bottom: 2.5em;
			width: 80%;
			text-align: center;
		}

		.code-input-section {
			display: flex;

			.code-input {
				border-top-right-radius: 0;
				border-bottom-right-radius: 0;

				input {
					text-align: center;
				}
			}

			.submit-btn {
				background-color: $accent;
				border-top-left-radius: 0;
				border-bottom-left-radius: 0;

				svg {
					height: 80%;
				}
			}
		}
	}
}

#decrypt {
	display: flex;
	flex-direction: column;
	align-items: center;

	.selected-image {
		margin-top: 9.5em;
		margin-bottom: 2em;
		width: 161px;
		aspect-ratio: 1;
		border-radius: 100%;
		background-size: cover;
		background-position: center;
		background-repeat: no-repeat;
	}

	&[data-type="file"] {
		.selected-image {
			margin-top: 6.5em;
		}
	}

	.input-field {
		margin-top: 1.75em;
		display: flex;

		.input-container {
			width: 300px;
			height: 40px;
			border-top-right-radius: 0;
			border-bottom-right-radius: 0;
		}

		.submit-button {
			background-color: $primary-dark;
			border-top-left-radius: 0;
			border-bottom-left-radius: 0;
			aspect-ratio: 1;
			height: 100%;
			display: grid;
			place-items: center;
			padding: 0.75em;

			svg {
				height: 100%;

				path {
					stroke: $text;
				}
			}
		}
	}

	.option-btn {
		cursor: pointer;
		font-size: 0.75em;
		margin-top: calc(3.5em - 20px);
		padding: 10px;
	}

	.option-btn:hover,
	.option-btn:focus:not(:active) {
		filter: brightness(1.2);
	}

	.option-btn:active {
		filter: brightness(0.8);
	}
}

#decrypt-auth,
#decrypt-lost {
	display: flex;
	flex-direction: column;
	justify-content: center;
	align-items: center;

	h1 {
		font-weight: normal;
	}

	.code-input-section {
		margin-top: 2em;
		display: flex;

		.code-input {
			border-top-right-radius: 0;
			border-bottom-right-radius: 0;

			input {
				text-align: center;
			}
		}

		.submit-btn {
			background-color: $accent;
			border-top-left-radius: 0;
			border-bottom-left-radius: 0;

			svg {
				height: 80%;
			}
		}
	}

	.option-btn {
		font-size: 0.75em;
		margin-top: 2em;
	}

	.option-btn ~ .option-btn {
		margin-top: unset;
	}
}

#home {
	display: grid;
	grid-template-columns: 14em auto;

	.nav-panel {
		display: flex;
		flex-direction: column;
		height: 100%;
		padding: 0.85em;
		position: relative;

		.logo {
			height: 4em;
		}

		.groups-section {
			overflow: hidden;
			max-height: 25.7em;

			.handle {
				display: flex;
				align-items: center;
				justify-content: space-between;
				margin-bottom: 5px;

				span {
					color: $primary;
					font-size: 0.9em;
					padding-left: 0.7rem;
				}

				button {
					border-radius: 100px;
					height: 30px;
					aspect-ratio: 1;
					padding: 0.25em;

					svg {
						height: 100%;
						width: 100%;

						path {
							stroke: $primary;
						}
					}

					&:hover,
					&:focus:not(:active) {
						filter: none;
						background-color: $primary-darker;
					}

					&:active {
						filter: brightness(0.85);
					}
				}
			}

			.groups {
				overflow-y: scroll;
				height: 100%;
				width: 100%;

				&::-webkit-scrollbar {
					display: none;
				}

				.group {
					display: flex;
					font-size: 0.7em;
					align-items: center;
					border-radius: 4px;
					cursor: pointer;
					height: 2.75em;
					margin-bottom: 2px;

					.name {
						height: 100%;
						display: flex;
						align-items: center;
						padding-left: 0.7rem;
						width: 100%;

						.input-container {
							background-color: transparent;
							width: 100%;

							input {
								color: $text;
								font-size: 1em;
							}
						}
					}

					.count {
						margin-left: auto;
						color: $primary;
						display: inline-flex;
						justify-content: center;
						align-items: center;
					}

					:last-child:not(.menu) {
						height: 100%;
						aspect-ratio: 1;
					}

					&:hover:not(:has(.menu:hover)):not(:has(.menu-button:hover)):not(.selected):not(.editing),
					&:focus:not(:active):not(:has(.menu:focus)):not(:has(.menu-button:focus)):not(.selected):not(.editing) {
						background-color: $primary-darker;
					}

					&:active:not(:has(.menu:active)):not(:has(.menu-button:active)):not(.selected):not(.editing) {
						filter: brightness(0.85);
					}

					&.drag-highlight {
						background-color: $primary-darker;
					}

					.menu-button {
						height: 100%;
						aspect-ratio: 1;
						padding: 0;
						margin-left: 5px;

						.visual-layer {
							display: flex;
							justify-content: center;
							align-items: center;
							border-radius: 100px;
							height: 80%;
							aspect-ratio: 1;
							padding: 0.15em;
						}

						&:hover .visual-layer,
						&:focus:not(:active) .visual-layer {
							background-color: $primary-darker;
						}

						.visual-layer {
							svg {
								height: 70%;
								width: 70%;

								path {
									fill: $text;
									stroke: $text;
								}
							}
						}
					}

					&.selected {
						background-color: $primary-dark;

						.count {
							color: $primary-darker;
						}

						.menu-button {
							&:hover .visual-layer,
							&:focus:not(:active) .visual-layer {
								background-color: rgba(0, 0, 0, 0.22);
							}
						}
					}

					&.editing {
						&:not(.selected) {
							background-color: $primary-darker;
						}

						.name {
							padding-left: 0;
							width: 100%;
						}
					}

					.menu {
						$borderRadius: 4px;
						border-radius: $borderRadius;
						position: absolute;
						left: 107%;
						display: flex;
						flex-direction: column;
						justify-content: space-between;
						align-items: center;
						background-color: $primary-darker;
						box-shadow: 0 5px 10px rgba(0, 0, 0, 0.5);

						.menu-item {
							font-size: 1.1em;
							height: 3em;
							width: 10em;
							background-color: $primary-darker;
							border-radius: $borderRadius;
							color: $primary;
							position: relative;
							z-index: 200;

							&:first-child:not(:last-child) {
								border-radius: $borderRadius $borderRadius 0 0;
							}

							&:last-child:not(:first-child) {
								border-radius: 0 0 $borderRadius $borderRadius;
							}

							&:hover,
							&:focus:not(:active) {
								filter: brightness(1.3);
							}
						}

						.divider {
							height: 1px;
							width: 80%;
							background-color: rgba(0, 0, 0, 0.12);
							z-index: 200;
							border-radius: 100px;
						}

						&::before {
							content: "";
							position: absolute;
							$size: 15px;
							$negSize: -$size;
							height: $size;
							aspect-ratio: 1;
							left: calc(($negSize / 2) + 2px);
							top: calc(50% - ($size / 2));
							background-color: $primary-darker;
							transform: rotate(45deg);
							border-radius: $borderRadius;
						}
					}
				}

				hr {
					height: 1px;
					background-color: $text-darkest;
					margin-bottom: 2px;
				}
			}
		}

		.additional-functions {
			margin-top: auto;
			margin-bottom: 2em;

			div {
				margin-bottom: 0.25em;
				border-radius: 4px;
				height: 2em;
				display: flex;
				align-items: center;
				cursor: pointer;
				padding-left: 0.5em;
				padding-top: 0.25em;
				padding-bottom: 0.25em;

				svg {
					height: 70%;
					aspect-ratio: 1;

					path {
						stroke: $text;
					}
				}

				span {
					margin-left: 0.65em;
					font-size: 0.85em;
				}

				&:hover,
				&:focus:not(:active) {
					filter: brightness(1.125);
					background-color: $input-background;
				}

				&:active {
					filter: brightness(0.85);
				}
			}
		}

		.version {
			position: absolute;
			bottom: 0.65em;
			right: 0.65em;
			font-size: 0.65em;
			color: $text-darkest;
		}
	}

	.view {
		height: 100%;
		background-color: $background-light;

		.action-bar {
			display: grid;
			grid-template-columns: 1fr auto;
			gap: 0.5em;
			padding: 1em;

			.input-container {
				width: 100%;
			}

			.add-item-button {
				width: 9em;
				font-size: 0.775em;
				background-color: $secondary;
				justify-content: space-evenly;
				padding: 0.65em 0.5em;

				.icon {
					background-color: rgba(0, 0, 0, 0.12);
					border-radius: 100%;
					height: 100%;
					aspect-ratio: 1;
					display: flex;
					justify-content: center;
					align-items: center;
					padding: 0.35em;

					svg {
						height: 100%;
						aspect-ratio: 1;

						path {
							stroke: $text;
						}
					}
				}
			}
		}

		.header {
			display: flex;
			flex-direction: column;
			align-items: center;

			.title {
				margin-top: 6.5em;
				font-weight: 100;
				font-size: 1.45em;
			}

			.subtitle {
				margin-top: 0.65em;
				font-size: 1.1em;
			}
		}

		.options {
			margin-top: 3em;
			display: flex;
			flex-direction: column;
			align-items: center;

			button {
				font-size: 0.7em;
				width: 185px;
				height: 3.25em;
				margin-bottom: 10px;
				position: relative;

				&:not(:last-child) {
					background-color: $primary;
					color: $background;
				}

				&:last-child {
					background-color: $secondary;
				}

				.icon {
					position: absolute;
					background-color: rgba(0, 0, 0, 0.12);
					border-radius: 100%;
					height: 60%;
					aspect-ratio: 1;
					display: flex;
					justify-content: center;
					align-items: center;
					padding: 0.45em;
					left: 1em;

					svg {
						height: 100%;

						path {
							stroke: $text;
						}
					}
				}
			}
		}
	}

	.panel-container {
		position: fixed;
		top: 0;
		right: -100vw;
		height: 100vh;
		width: 100vw;
		background-color: rgba(0, 0, 0, 0.22);

		.panel {
			position: fixed;
			right: -63vw;
			width: 63vw;
			height: 100%;
			background-color: $background-light;
			overflow-y: scroll;
			scrollbar-color: $primary-darker $input-background;
			transition: right 0.15s;

			.panel-action-bar {
				position: sticky;
				display: flex;
				justify-content: space-between;
				align-items: center;
				width: 100%;
				height: 5em;
				margin-bottom: 2rem;
				top: 0;
				background-color: $background-light;
				z-index: 1;
				padding: 0 2.25rem;

				&.with-scroll {
					box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
				}

				.close-panel-btn {
					background-color: $input-background;
					width: 30px;
					height: 30px;
					padding: 0.325em;
					border-radius: 100px;

					svg {
						transform: rotate(45deg);
						height: 100%;
						width: 100%;

						path {
							stroke: $primary;
						}
					}

					&:hover,
					&:focus:not(:active) {
						filter: brightness(1.4);
					}

					&:active {
						filter: brightness(1.1);
					}
				}

				.title {
					position: absolute;
					left: 50%;
					top: 50%;
					transform: translate(-50%, -50%);
					font-size: 1.4rem;
				}

				.save-form-btn {
					background-color: $primary-dark;
					height: 2.25rem;
					width: 5rem;

					&:disabled {
						background-color: $input-background;
						color: $primary;
						cursor: not-allowed;

						&:hover,
						&:focus,
						&:active {
							filter: none;
						}
					}
				}
			}

			.form {
				width: 100%;
				position: relative;
				padding: 0 2.25rem 1.5rem;

				.required-note {
					font-size: 0.65em;
					color: $secondary;
					position: absolute;
					top: -2em;
					right: 2.25rem;
				}
			}

			&#login-panel .form {
				.title-input,
				.groups-input,
				.email-input,
				.username-input,
				.password-field,
				.website-field,
				.tfa-input,
				.notes-input {
					margin-bottom: 1.25rem;
					height: 2.55rem;
					width: 100%;
				}

				.extend-btn {
					$padding: 0.1rem;
					$size: 1.2rem;
					position: absolute;
					width: $size;
					height: $size;
					background-color: $input-background-contrast;
					padding: $padding;
					border-radius: 100px;
					z-index: 120;

					svg {
						path {
							stroke: $primary;
						}
					}
				}

				.separator {
					height: 2px;
					width: 100%;
					background-color: $input-background-contrast;
					margin: 2rem 0 2.5rem;
					position: relative;

					.extend-btn {
						top: 50%;
						left: 50%;
						transform: translate(-50%, -50%);
					}
				}

				.email-input,
				.username-input,
				.website-field {
					display: flex;
					position: relative;

					.email-input,
					.website-input,
					.username-input {
						width: 100%;
					}

					.extend-btn {
						top: 50%;
						right: 0;
						transform: translate(50%, -50%);
					}
				}

				.password-field {
					display: flex;

					.password-input {
						width: 100%;
						margin-right: 8px;
					}

					.action-button-wrapper button svg {
						width: 1rem;
					}

					.password-rules {
						margin-left: auto;
						background-color: $primary-dark;
						padding-left: 1.5rem;
						padding-right: 1.5rem;
						font-size: 0.8rem;
					}
				}

				.warnings-section {
					.warnings-container {
						background-color: $background;
						padding: 1rem 0.6rem;
						border-radius: 4px;

						.warning {
							display: flex;
							align-items: center;
							font-size: 0.7rem;

							svg {
								height: 1.25rem;
								aspect-ratio: 1;
								margin-right: 1em;

								path {
									stroke: $warn;
								}
							}

							&:not(:first-child) {
								margin-top: 0.5rem;
							}
						}
					}
				}

				.rules-section {
					margin-top: 1em;

					.optional {
						background-color: $background;
						display: inline-flex;
						flex-direction: column;
						align-items: center;
						padding: 0.6rem 1rem;
						border-radius: 4px 4px 0 0;
						position: relative;

						span {
							font-size: 0.7rem;
						}

						.line {
							position: absolute;
							height: 1px;
							width: 85%;
							background-color: $background-light;
							bottom: 0;
							filter: brightness(1.4);
						}
					}

					.rules-container {
						background-color: $background;
						padding: 1rem 0.6rem;
						border-radius: 0 4px 4px;

						.rule {
							display: flex;

							.left {
								display: flex;
								align-items: center;
								align-self: flex-start;
								font-size: 0.7rem;

								.mark {
									height: 1.5rem;
									width: 1.5rem;
									display: flex;
									justify-content: center;
									align-items: center;

									svg {
										height: 100%;
										width: 100%;
									}

									.icon-x-mark {
										path {
											stroke: $accent;
										}
									}

									.icon-check-mark {
										height: 85%;
										width: 85%;

										path {
											stroke: $success;
										}
									}
								}
							}

							.right {
								font-size: 0.7rem;
								width: 60%;
								margin-left: auto;
								background-color: $background-light;
								overflow-wrap: anywhere;
								padding: 0.75rem;
								border-radius: 4px;
							}

							&.with-right .left {
								padding-top: 0.425rem;
							}

							// every .with-right other than the first.
							// these css selector antics are starting to fuck with me...
							&.with-right ~ .with-right {
								margin-top: 0.5rem;
							}
						}

						hr {
							height: 1px;
							background-color: $background-light;
							filter: brightness(1.4);
							margin-top: 0.75rem;
							margin-bottom: 0.75rem;
						}

						.highlight {
							color: $primary;
						}
					}
				}

				.website-field,
				.username-field {
					.delete-btn {
						align-self: center;
						margin-right: 10px;
						background-color: $input-background;
						height: 1.5rem;
						width: 1.5rem;
						border-radius: 100px;
						padding: 0.1rem;

						svg {
							height: 100%;
							width: 100%;

							path {
								stroke: $accent;
							}
						}

						&:hover,
						&:focus:not(:active) {
							filter: brightness(1.4);
						}

						&:active {
							filter: brightness(1.1);
						}
					}
				}

				.notes-input {
					height: 10em;

					.icon,
					label,
					.placeholder {
						top: 1.25em;
					}
				}
			}

			&#ruleset-panel .form {
				$spacing: 8px;

				section {
					display: flex;
					flex-direction: column;

					// &:not(:first-of-type) {
					// 	margin-top: 2.5rem;
					// }

					.name-container {
						width: 100%;
						display: flex;
						align-items: center;

						.ruleset-name,
						.charset-name {
							width: 100%;
						}

						.load-preset-btn {
							font-size: 0.8rem;
							background-color: $primary-dark;
							width: 8rem;
							height: 2.5rem;
							margin-left: 0.75rem;
						}
					}

					.save-template-btn {
						font-size: 0.8rem;
						background-color: $primary-dark;
						margin-top: 1rem;
						height: 2.5rem;
					}

					hr {
						height: 0.1rem;
						width: 100%;
						background-color: $input-background-contrast;
						margin: 1.5rem 0;
					}

					.general-rule {
						width: 100%;
						display: flex;
						align-items: center;

						.question {
							font-size: 0.8rem;
							width: 8rem;
						}

						.answer {
							margin-left: 1.5rem;
							display: flex;
							align-items: center;
							height: 3em;

							&.toggle button {
								font-size: 0.85rem;
								width: 3.5rem;

								&:hover,
								&:focus:not(:active) {
									filter: brightness(1.2);
								}

								&:active {
									filter: brightness(1.1);
								}
							}

							.password-ttl-number,
							.password-ttl-dropdown {
								margin-right: 0.75rem;
							}

							.password-ttl-number {
								width: 4em;
								font-size: 0.85;

								input {
									text-align: center;
								}
							}

							.password-ttl-dropdown {
								width: 7em;
							}

							.min,
							.max {
								width: 4rem;
								font-size: 0.85rem;

								input {
									text-align: center;
								}
							}

							.min ~ span {
								margin-left: $spacing;
								margin-right: $spacing;
							}
						}

						& ~ .general-rule {
							margin-top: 1rem;
						}
					}

					.container {
						width: 100%;
						display: flex;
						align-items: center;
					}

					.character-set-input {
						width: 100%;
						margin-top: 1rem;
						height: 5rem;

						.icon,
						label,
						.placeholder {
							top: 1.25em;
						}
					}

					.init-constraints-btn {
						background-color: $primary-dark;
						font-size: 0.8rem;
						height: 2.5rem;
						align-self: flex-end;
					}

					.constraint {
						width: 100%;
						display: flex;
						align-items: center;

						.delete-btn {
							align-self: center;
							margin-right: 10px;
							background-color: $input-background;
							height: 1.5rem;
							width: 1.5rem;
							border-radius: 100px;
							padding: 0.1rem;

							svg {
								height: 100%;
								width: 100%;

								path {
									stroke: $accent;
								}
							}

							&:hover,
							&:focus:not(:active) {
								filter: brightness(1.4);
							}

							&:active {
								filter: brightness(1.1);
							}
						}

						.sentence {
							height: 2.5rem;
							width: 100%;
							display: flex;
							align-items: center;

							span {
								font-size: 0.8rem;

								&:not(:first-child) {
									margin: $spacing;
								}
							}

							.constraint-type {
								margin-left: $spacing;
								width: 17rem;
								// max-width: 18rem;
								height: 100%;

								.selected-label {
									font-size: 0.8rem;
								}
							}

							.input-container.type-number {
								margin-left: $spacing;
								width: 4rem;
								height: 100%;

								input {
									text-align: center;
								}
							}
						}

						// Selects every not-first .constraint
						& ~ .constraint {
							margin-top: 0.65rem;
						}

						& ~ .init-constraints-btn {
							margin-top: 1rem;
						}
					}
				}
			}
		}

		&.visible {
			right: 0vw;

			.panel {
				right: 0vw;
			}
		}
	}

	.items-section {
		height: 100%;
		display: flex;
		margin-top: 0.5em;

		.item-select,
		.item-view {
			width: 50%;
			height: 100%;
		}

		.item-select {
			.item-select-toolbar {
				height: 2.25em;
				display: flex;
				align-items: center;
				padding-left: 1em;
				padding-right: 0.45em;
				border-bottom: 1px solid $primary-darker;

				.select-all-button {
					background-color: $checkbox-background;
					padding: 0;
					height: 0.95em;
					border-radius: 2.5px;
					aspect-ratio: 1;

					svg {
						height: 90%;
						width: 90%;
					}

					&.selected {
						background-color: $primary-dark;

						path {
							stroke: $primary;
						}
					}
				}

				.items-selected-count {
					font-size: 0.65em;
					color: $text-darkest;
					margin-left: 1em;
				}

				.filter-button,
				.more-button {
					border-radius: 100px;
					height: 80%;
					aspect-ratio: 1;
					padding: 0.25em;

					svg {
						height: 70%;
						width: 70%;

						path {
							stroke: $text;
						}
					}

					&:hover,
					&:focus:not(:active) {
						filter: none;
						background-color: $primary-darker;
					}

					&:active {
						filter: brightness(0.85);
					}
				}

				.filter-button {
					margin-left: auto;
				}
			}

			.no-results {
				text-align: center;
				margin-top: 1em;
				color: $text-darkest;
			}

			.item-drag-count {
				position: absolute;
				top: -9999px;
				left: -9999px;
				background-color: $accent;
				color: $text;
				padding: 0.25em 0.75em;
				border-radius: 4px;
				z-index: 1000;
				font-size: 0.65em;
			}

			.item {
				height: 3.5em;
				display: flex;
				align-items: center;
				padding: 0 1em;
				cursor: pointer;

				.item-select-button {
					background-color: $checkbox-background;
					padding: 0;
					height: 0.95em;
					border-radius: 2.5px;
					aspect-ratio: 1;

					svg {
						height: 90%;
						width: 90%;
					}

					&.selected {
						background-color: $primary-dark;

						path {
							stroke: $primary;
						}
					}
				}

				.pfp {
					margin-left: 0.8em;
					height: 65%;
					aspect-ratio: 1;
					display: flex;
					justify-content: center;
					align-items: center;
					border-radius: 100px;
					overflow: hidden;

					img {
						height: 100%;
						aspect-ratio: 1;
					}

					&.with-bg {
						background-color: $accent;
					}
				}

				.details {
					margin-left: 0.8em;
					display: flex;
					flex-direction: column;
					justify-content: center;
					height: 100%;

					.title {
						font-size: 0.85em;
					}

					.subtitle {
						font-size: 0.65em;
						color: $text;
						opacity: 0.4;
						margin-top: 5px;
					}
				}

				&:hover,
				&:focus {
					background-color: $hovered-item;
				}

				&:active {
					background-color: $active-item;
				}

				&.active {
					background-color: $selected-item;
				}
			}
		}

		.item-view {
			border-left: 2px solid $primary-darker;
			padding: 0.75em;

			.view-header {
				display: flex;
				align-items: center;
				margin-bottom: 1em;

				.title {
					font-size: 1.25em;
					margin-left: 0.5em;
				}

				.edit-button {
					margin-left: auto;
					background-color: $primary-dark;
					font-size: 0.8em;
					width: 6em;
					height: 3em;

					svg {
						height: 70%;
						margin-right: 5px;

						path {
							stroke: $text;
						}
					}
				}
			}

			.expires-note {
				font-size: 0.6em;
				color: $text-darkest;
				margin-top: 1em;

				&.expired {
					color: $accent-light;
				}
			}

			.website-separator {
				width: 100%;
				height: 1px;
				background-color: $primary-darker;
				margin: 1.25em 0 0.25em;
			}

			.website-container {
				font-size: 0.85em;
				display: flex;
				width: fit-content;
				align-items: center;
				height: 2em;
				cursor: pointer;

				.website,
				path {
					color: $primary;
					stroke: $primary;
					text-decoration: underline;
					font-size: 0.8em;
				}

				.website-nav-button {
					height: 1.25em;
					aspect-ratio: 1;
					margin-left: 0.5em;
				}

				&:hover,
				&:focus:not(:active) {
					filter: brightness(1.2);
				}
			}

			&.website-container ~ .website-container {
				margin-top: 1em;
			}

			.copy-button {
				svg {
					height: 80%;
				}
			}

			.input-container {
				width: 100%;
				margin-top: 1.1em;
			}

			.notes-box {
				height: 10em;

				.icon,
				label,
				.placeholder {
					top: 1.25em;
				}
			}

			.last-updated {
				position: absolute;
				bottom: 10px;
				right: 10px;
				font-size: 0.6em;
				color: $text-darkest;
			}
		}
	}

	.modal-container {
		position: fixed;
		top: 0;
		left: 0;
		height: 100vh;
		width: 100vw;
		background-color: rgba(0, 0, 0, 0.35);
		display: none;
		pointer-events: none;
		justify-content: center;
		align-items: center;

		.modal {
			background-color: $primary-darker;
			padding: 2.5em 3.5em;
			border-radius: 4px;
			box-shadow: 0 5px 10px rgba(0, 0, 0, 0.5);

			.content {
				// font-size: 1.2em;
				// max-width: 85%;
				text-align: center;
				margin-bottom: 1.75em;
			}
		}

		&.visible {
			display: flex !important;
			pointer-events: all;
		}
	}

	.add-item-modal {
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;

		.add-item-options {
			display: flex;
			flex-direction: column;
			align-items: center;

			button {
				font-size: 0.7em;
				width: 17em;
				height: 3.25em;
				margin-bottom: 10px;
				position: relative;
				background-color: $primary;
				color: $background;

				&:not(:last-child) {
					background-color: $primary;
				}

				&:last-child {
					color: $text;
					background-color: $secondary;
					margin-bottom: 0;
				}

				.icon {
					position: absolute;
					background-color: rgba(0, 0, 0, 0.12);
					border-radius: 100%;
					height: 60%;
					aspect-ratio: 1;
					display: flex;
					justify-content: center;
					align-items: center;
					padding: 0.45em;
					left: 1em;

					svg {
						height: 100%;

						path {
							stroke: $text;
						}
					}
				}
			}
		}
	}

	.filter-items-modal {
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;

		.filter-options {
			display: flex;
			flex-direction: column;
			align-items: center;

			button {
				font-size: 0.7em;
				width: 17em;
				height: 3.25em;
				margin-bottom: 10px;
				position: relative;
				background-color: $primary;
				color: $background;

				&:last-child {
					margin-bottom: 0;
				}

				&.active {
					background-color: $secondary;
					color: $text;
				}

				.icon {
					position: absolute;
					background-color: rgba(0, 0, 0, 0.12);
					border-radius: 100%;
					height: 60%;
					aspect-ratio: 1;
					display: flex;
					justify-content: center;
					align-items: center;
					padding: 0.45em;
					left: 1em;

					svg {
						height: 100%;

						path {
							stroke: $text;
						}
					}
				}
			}
		}
	}

	.item-options-modal {
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;

		.item-options {
			display: flex;
			flex-direction: column;
			align-items: center;

			button {
				font-size: 0.7em;
				width: 17em;
				height: 3.25em;
				margin-bottom: 10px;
				position: relative;
				background-color: $primary;
				color: $background;

				&:last-child {
					margin-bottom: 0;
				}

				.icon {
					position: absolute;
					background-color: rgba(0, 0, 0, 0.12);
					border-radius: 100%;
					height: 60%;
					aspect-ratio: 1;
					display: flex;
					justify-content: center;
					align-items: center;
					padding: 0.45em;
					left: 1em;

					svg {
						height: 100%;

						path {
							stroke: $text;
						}
					}
				}
			}
		}

		.add-items-to-groups-dropdown-container {
			margin-top: 0.75em;
			width: 80%;
			display: flex;
			justify-content: center;

			.add-items-to-groups-input {
				width: 100%;
			}
		}

		.btn-container {
			margin-top: 3em;
			width: 50%;
			display: flex;
			justify-content: center;

			.confirm-btn {
				background-color: $primary-dark;
			}

			.cancel-btn {
				margin-left: 3em;
				background-color: $accent;
			}
		}
	}
}
